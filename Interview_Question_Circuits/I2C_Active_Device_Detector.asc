Version 4
SHEET 1 4196 1092
WIRE 80 -384 -96 -384
WIRE -320 -368 -320 -416
WIRE 80 -288 80 -384
WIRE -320 -208 -320 -288
WIRE 384 -208 256 -208
WIRE 80 -112 80 -208
WIRE 256 -112 256 -208
WIRE 256 -112 80 -112
WIRE 304 -112 256 -112
WIRE 368 -112 304 -112
WIRE 512 -112 448 -112
WIRE 704 -112 512 -112
WIRE 80 -64 80 -112
WIRE 704 -64 704 -112
WIRE -368 -16 -464 -16
WIRE -224 -16 -288 -16
WIRE 0 -16 -224 -16
WIRE 864 -16 784 -16
WIRE 960 -16 864 -16
WIRE 1200 -16 1040 -16
WIRE -464 0 -464 -16
WIRE 1200 0 1200 -16
WIRE -224 16 -224 -16
WIRE 0 16 0 -16
WIRE 32 16 0 16
WIRE 784 16 784 -16
WIRE 784 16 752 16
WIRE 864 16 864 -16
WIRE -464 112 -464 80
WIRE -224 112 -224 96
WIRE 80 112 80 32
WIRE 704 112 704 32
WIRE 864 112 864 96
WIRE 1200 112 1200 80
WIRE 720 400 720 384
WIRE 304 448 304 -112
WIRE 608 448 304 448
WIRE 976 528 832 528
WIRE 1152 528 976 528
WIRE 1280 528 1232 528
WIRE 1376 528 1280 528
WIRE 1520 528 1456 528
WIRE 1744 528 1520 528
WIRE 2064 528 1744 528
WIRE 1280 576 1280 528
WIRE 1520 576 1520 528
WIRE 512 608 512 -112
WIRE 608 608 512 608
WIRE 864 608 832 608
WIRE 720 672 720 656
WIRE 2000 672 1920 672
WIRE 1280 688 1280 640
WIRE 1520 688 1520 640
WIRE 1920 688 1920 672
WIRE 1920 784 1920 768
WIRE 2000 784 1920 784
WIRE 1920 800 1920 784
WIRE 2224 896 2224 880
WIRE 1920 912 1920 880
WIRE 2000 912 2000 784
WIRE 2080 912 2000 912
WIRE 2192 912 2080 912
WIRE 2368 928 2256 928
WIRE 1744 944 1744 528
WIRE 2192 944 1744 944
WIRE 2224 976 2224 960
FLAG 704 112 0
FLAG 80 112 0
FLAG -224 112 0
FLAG 864 112 0
FLAG -96 -384 3.3V
FLAG -320 -416 3.3V
FLAG -464 112 0
FLAG 1200 112 0
FLAG -320 -208 0
FLAG 384 -208 SDA_DATA
FLAG 720 672 0
FLAG 720 384 3.3V
FLAG 976 528 OUT_CURR_SENSE
FLAG 1280 688 0
FLAG 2064 528 OUT_CURR_SENSE_FILT
FLAG 1520 688 0
FLAG 2224 976 0
FLAG 2224 880 3.3V
FLAG 1920 912 0
FLAG 2000 672 3.3V
FLAG 2368 928 ADA7415_SDA_ACTIVE
FLAG 2080 912 VTHRES
SYMBOL res 352 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL res 64 -304 R0
SYMATTR InstName R2
SYMATTR Value 4.7k
SYMBOL res -240 0 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 848 0 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 1056 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res -272 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL voltage -464 -16 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage 1200 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0 10n 10n 5u 10u 10k)
SYMBOL voltage -320 -384 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VCC
SYMATTR Value 3.3
SYMBOL Opamps\\LT1999-50 720 528 R0
SYMATTR InstName U1
SYMBOL Custom_LTspice_sym\\Transistors\\nmos_with_body_diode 752 -64 M0
SYMATTR InstName M2
SYMATTR Value BSS123
SYMBOL Custom_LTspice_sym\\Transistors\\nmos_with_body_diode 32 -64 R0
SYMATTR InstName M1
SYMATTR Value BSS123
SYMBOL res 1248 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL cap 1264 576 R0
SYMATTR InstName C1
SYMATTR Value 0.01µF
SYMBOL res 1472 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 4.99k
SYMBOL cap 1504 576 R0
SYMATTR InstName C2
SYMATTR Value 4700pF
SYMBOL Comparators\\LTC6752 2224 864 R0
SYMATTR InstName U2
SYMBOL res 1936 784 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 45k
SYMBOL res 1936 896 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 55k
TEXT -248 184 Left 2 ;Master Device
TEXT 1264 -256 Left 2 ;ADA7415 Active\n \n(Initiating I2C transactions)\nI2C Clock Freq = 100kHz\nI2C Clock Period = 10us
TEXT 288 -352 Left 2 ;Direction of current when ADA7415 is active.\nADA7415 sinks current into its open drain/collector terminal
TEXT 320 728 Left 2 !.tran 0 1m 0
TEXT 560 736 Left 2 ;Bi-directional Current Sense Amp:\n \nOutput biased at 1.65V. Output deviates\nfrom 1.65V depending on direction of current\nflow through sense resistor.\n \nVout = 1.65 + Isense x 10 x 50
TEXT 1288 736 Left 2 ;Low-Pass Filter
LINE Normal 512 -272 304 -272
LINE Normal 480 -288 512 -272
LINE Normal 480 -256 512 -272
RECTANGLE Normal 192 160 -608 -128 2
RECTANGLE Normal 1840 160 592 -128 2
RECTANGLE Normal 1632 720 1120 480 2
RECTANGLE Normal 2656 1024 256 304 2
