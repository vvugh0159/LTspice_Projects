Version 4.1
SHEET 1 2692 2380
WIRE -2320 -160 -2368 -160
WIRE -2144 -160 -2320 -160
WIRE -1968 -160 -2144 -160
WIRE -1888 -160 -1968 -160
WIRE -1792 -160 -1888 -160
WIRE -1664 -160 -1792 -160
WIRE -1504 -160 -1664 -160
WIRE -1456 -160 -1504 -160
WIRE -1328 -160 -1376 -160
WIRE -976 -160 -1328 -160
WIRE -496 -160 -976 -160
WIRE -240 -160 -496 -160
WIRE -896 -48 -1184 -48
WIRE -768 -48 -832 -48
WIRE -496 -48 -496 -160
WIRE -1328 -32 -1328 -160
WIRE -1504 -16 -1504 -160
WIRE -1664 0 -1664 -160
WIRE -1184 64 -1184 -48
WIRE -1136 64 -1184 64
WIRE -896 64 -1056 64
WIRE -768 64 -832 64
WIRE -2144 128 -2144 -160
WIRE -976 176 -976 -160
WIRE -1664 192 -1664 80
WIRE -1328 192 -1328 48
WIRE -1184 192 -1184 64
WIRE -1184 192 -1328 192
WIRE -992 192 -1184 192
WIRE -1968 208 -1968 -160
WIRE -1888 208 -1888 -160
WIRE -1792 208 -1792 -160
WIRE -768 208 -768 64
WIRE -768 208 -928 208
WIRE -736 208 -768 208
WIRE -640 208 -656 208
WIRE -592 208 -640 208
WIRE -496 208 -496 32
WIRE -496 208 -512 208
WIRE -1504 224 -1504 64
WIRE -1024 224 -1504 224
WIRE -992 224 -1024 224
WIRE -1328 256 -1328 192
WIRE -1232 256 -1328 256
WIRE -2368 272 -2368 -160
WIRE -240 272 -240 -160
WIRE -640 288 -640 208
WIRE -576 288 -640 288
WIRE -496 288 -496 208
WIRE -496 288 -512 288
WIRE -416 288 -496 288
WIRE -288 288 -416 288
WIRE -1504 320 -1504 224
WIRE -1328 320 -1328 256
WIRE -1232 320 -1232 256
WIRE -240 400 -240 368
WIRE -240 400 -640 400
WIRE -640 432 -640 400
WIRE -2144 464 -2144 208
WIRE -2048 464 -2144 464
WIRE -1968 464 -1968 272
WIRE -1968 464 -2048 464
WIRE -1888 464 -1888 272
WIRE -1888 464 -1968 464
WIRE -1792 464 -1792 272
WIRE -1792 464 -1888 464
WIRE -1504 464 -1504 400
WIRE -1504 464 -1792 464
WIRE -1328 464 -1328 400
WIRE -1328 464 -1504 464
WIRE -1232 464 -1232 400
WIRE -1232 464 -1328 464
WIRE -976 464 -976 240
WIRE -976 464 -1232 464
WIRE -240 464 -240 400
WIRE -640 544 -640 496
WIRE -496 544 -640 544
WIRE -640 576 -688 576
WIRE -400 576 -640 576
WIRE -240 592 -240 528
WIRE -32 592 -240 592
WIRE -240 624 -240 592
WIRE -688 688 -688 576
WIRE -400 688 -400 576
WIRE -496 816 -496 544
WIRE -400 816 -400 768
WIRE -400 816 -496 816
WIRE -400 832 -400 816
WIRE -1024 848 -1024 224
WIRE -736 848 -848 848
WIRE -688 848 -688 768
WIRE -448 848 -688 848
WIRE -240 848 -240 704
WIRE -1136 864 -1136 832
WIRE -1168 880 -1200 880
WIRE -1088 896 -1104 896
WIRE -96 896 -176 896
WIRE -1344 912 -1376 912
WIRE -1248 912 -1264 912
WIRE -1168 912 -1248 912
WIRE -848 912 -848 848
WIRE -688 928 -688 848
WIRE -2144 944 -2144 464
WIRE -736 944 -736 848
WIRE -96 944 -96 896
WIRE -1376 960 -1376 912
WIRE -1248 960 -1248 912
WIRE -1200 976 -1200 880
WIRE -1024 976 -1024 944
WIRE -1024 976 -1200 976
WIRE -1024 1008 -1024 976
WIRE -240 1040 -240 1024
WIRE -96 1040 -96 1024
WIRE -96 1040 -240 1040
WIRE -2368 1104 -2368 352
WIRE -2144 1104 -2144 1024
WIRE -2144 1104 -2368 1104
WIRE -1376 1104 -1376 1040
WIRE -1376 1104 -2144 1104
WIRE -1248 1104 -1248 1040
WIRE -1248 1104 -1376 1104
WIRE -1136 1104 -1136 928
WIRE -1136 1104 -1248 1104
WIRE -1088 1104 -1136 1104
WIRE -1024 1104 -1024 1088
WIRE -1024 1104 -1088 1104
WIRE -848 1104 -848 992
WIRE -848 1104 -1024 1104
WIRE -736 1104 -736 992
WIRE -736 1104 -848 1104
WIRE -688 1104 -688 1008
WIRE -688 1104 -736 1104
WIRE -400 1104 -400 928
WIRE -400 1104 -688 1104
WIRE -240 1104 -240 1040
WIRE -240 1104 -400 1104
WIRE -1088 1248 -1088 1104
FLAG -416 288 GATE_DRIVE
FLAG -1088 1248 0
FLAG -2320 -160 VBUS
FLAG -32 592 OUT
FLAG -2048 464 VBUS-10V
FLAG -1136 832 VBUS
FLAG -640 576 VBUS
DATAFLAG -160 592 ""
DATAFLAG -496 128 ""
SYMBOL res -496 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20
SYMBOL res -1472 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RSNS
SYMATTR Value 100m
SYMBOL voltage -2368 256 M0
SYMATTR InstName VBUS
SYMATTR Value {Vbus}
SYMBOL res -512 -64 R0
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL pmos -288 368 M180
SYMATTR InstName M3
SYMATTR Value SQJ469EP
SYMBOL res -1344 -48 R0
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL cap -832 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 40p
SYMBOL res -2160 928 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL cap -1904 208 R0
SYMATTR InstName C8
SYMATTR Value 0.01µ
SYMBOL cap -1984 208 R0
SYMATTR InstName C9
SYMATTR Value 22µ
SYMBOL cap -1808 208 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMBOL res -1040 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4.99k
SYMBOL res -1488 -32 M0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL npn -1088 848 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL OpAmps\\UniversalOpAmp5 -1136 896 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=1Meg GBW=180Meg Phimargin=60 SlewPos=225Meg SlewNeg=225Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=50m Ilimit=30m
SYMBOL res -1040 992 R0
SYMATTR InstName R12
SYMATTR Value 4.99k
SYMBOL voltage -1376 944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {ISC/2}
SYMBOL cap -832 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10p
SYMBOL res -1248 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1232 1056 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -1344 304 R0
SYMATTR InstName R13
SYMATTR Value 2k
SYMBOL res -1520 304 R0
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL voltage -2144 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL OpAmps\\ADA4807 -960 208 R0
SYMATTR InstName U1
SYMBOL diode -512 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res -640 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5
SYMBOL res -1680 -16 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -1248 304 R0
SYMATTR InstName R15
SYMATTR Value 1Meg
SYMBOL res -256 608 R0
SYMATTR InstName ROUT
SYMATTR Value 1µ
SYMBOL diode -656 432 R0
SYMATTR InstName D2
SYMATTR Value VS-E5PH6012
SYMBOL voltage -848 896 R0
SYMATTR InstName VOC1
SYMATTR Value {VOC}
SYMBOL diode -224 464 M0
SYMATTR InstName D3
SYMATTR Value VS-E5PH6012
SYMBOL voltage -96 928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VLOAD
SYMATTR Value 0
SYMBOL npn -176 848 M0
SYMATTR InstName Q2
SYMBOL res -256 928 R0
SYMATTR InstName R5
SYMATTR Value 100m
SYMBOL pmos -448 928 M180
SYMATTR InstName M1
SYMATTR Value Si7469DP
SYMBOL res -416 672 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL g -688 912 R0
SYMATTR InstName G1
SYMATTR Value {-1.0/10k}
SYMBOL res -704 672 R0
SYMATTR InstName R16
SYMATTR Value 10k
TEXT -2568 480 Right 2 !.param RSNS=20m\n.param RSEL = 18\n.param RGAIN = 200\n.param RIN_INTEG = 10k
TEXT -2576 -56 Right 2 !.model SW SW(Ron=10u, Roff=10G, Vt=0.5, Vh=-0.4)
TEXT -2576 24 Right 2 ;.tran 0 10 0
TEXT -2568 432 Right 2 ;.ac dec 1k 100 10Meg
TEXT -2568 624 Right 2 !.param Gfs = 4\n.param Cgs = 6000p\n.param Cgd = 10p
TEXT -2576 208 Right 2 !.opt noopiter
TEXT -2576 184 Right 2 !.opt abstol=1E-4 reltol=1E-4
TEXT -2600 984 Right 2 ;.step temp list -55 25 155
TEXT -2608 1048 Right 2 ;.param Cload=10u\n.param Lcable = 1p
TEXT -2600 944 Right 2 !.param Vbus 32
TEXT -1488 1312 Left 2 !.step param ISC list 100m 1 5 10 20
TEXT -1488 1352 Left 2 !.step param VOC list 100m 10 20 30
TEXT -1488 1416 Left 2 !.dc VLOAD 0 10 10m
TEXT -1488 1384 Left 2 !.model Dideal D(Ron=1u, Roff=1G, Vfwd = 10m)
