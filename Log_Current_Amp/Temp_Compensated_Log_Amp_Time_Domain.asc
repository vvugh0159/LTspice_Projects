Version 4
SHEET 1 6324 2276
WIRE 336 -1280 336 -1376
WIRE 336 -1104 336 -1200
WIRE 960 -1104 336 -1104
WIRE 336 -1056 336 -1104
WIRE 272 -1008 192 -1008
WIRE -448 -928 -448 -960
WIRE 192 -896 192 -1008
WIRE 336 -896 336 -960
WIRE 336 -896 192 -896
WIRE -448 -800 -448 -848
WIRE 336 -784 336 -896
WIRE 32 -208 -208 -208
WIRE 336 -208 128 -208
WIRE -752 -128 -1504 -128
WIRE -432 -128 -752 -128
WIRE -320 -128 -432 -128
WIRE -256 -128 -320 -128
WIRE -208 -128 -208 -208
WIRE -208 -128 -256 -128
WIRE -208 -96 -208 -128
WIRE 80 -96 80 -144
WIRE 80 -96 -208 -96
WIRE 160 -96 80 -96
WIRE -320 -32 -320 -128
WIRE -1504 -16 -1504 -128
WIRE -752 -16 -752 -128
WIRE -432 -16 -432 -128
WIRE 1504 64 1376 64
WIRE -64 80 -64 64
WIRE -208 96 -208 -96
WIRE -96 96 -208 96
WIRE 160 112 -32 112
WIRE 336 112 336 -208
WIRE 336 112 224 112
WIRE 464 112 336 112
WIRE 736 112 464 112
WIRE 1376 112 1376 64
WIRE -96 128 -208 128
WIRE 1328 128 1280 128
WIRE -64 160 -64 144
WIRE -1504 176 -1504 64
WIRE -752 176 -752 64
WIRE -432 176 -432 64
WIRE -320 176 -320 48
WIRE -208 176 -208 128
WIRE 1328 256 1328 176
WIRE 1376 256 1376 192
WIRE 736 352 736 112
WIRE 800 352 736 352
WIRE 976 352 880 352
WIRE 1072 352 976 352
WIRE 976 400 976 352
WIRE 32 416 -208 416
WIRE 336 416 128 416
WIRE -416 496 -496 496
WIRE -208 496 -208 416
WIRE -208 496 -336 496
WIRE 1152 512 1152 496
WIRE 976 528 976 480
WIRE 1072 528 1072 352
WIRE 1120 528 1072 528
WIRE 1808 528 1808 512
WIRE -208 544 -208 496
WIRE 80 544 80 480
WIRE 80 544 -208 544
WIRE 1280 544 1280 128
WIRE 1280 544 1184 544
WIRE 1296 544 1280 544
WIRE 1776 544 1296 544
WIRE 1120 560 1072 560
WIRE 1952 560 1840 560
WIRE 2384 560 1952 560
WIRE 1776 576 1728 576
WIRE 1152 592 1152 576
WIRE 1808 608 1808 592
WIRE -496 640 -496 496
WIRE -64 704 -64 688
WIRE -208 720 -208 544
WIRE -96 720 -208 720
WIRE 336 736 336 416
WIRE 336 736 -32 736
WIRE 464 736 336 736
WIRE 816 736 464 736
WIRE 1056 736 896 736
WIRE 1072 736 1072 560
WIRE 1072 736 1056 736
WIRE 1136 736 1072 736
WIRE 1296 736 1296 544
WIRE 1296 736 1216 736
WIRE -96 752 -208 752
WIRE 1536 752 1408 752
WIRE 1712 752 1616 752
WIRE 1728 752 1728 576
WIRE 1728 752 1712 752
WIRE 1792 752 1728 752
WIRE 1952 752 1952 560
WIRE 1952 752 1872 752
WIRE -64 784 -64 768
WIRE -496 800 -496 720
WIRE -208 800 -208 752
WIRE 1408 816 1408 752
WIRE 1056 848 1056 736
WIRE 1168 848 1056 848
WIRE 1296 848 1296 736
WIRE 1296 848 1232 848
WIRE 1712 880 1712 752
WIRE 1824 880 1712 880
WIRE 1952 880 1952 752
WIRE 1952 880 1888 880
FLAG -64 160 0
FLAG -64 64 VCC
FLAG -208 176 0
FLAG -448 -960 VCC
FLAG -448 -800 0
FLAG -320 176 0
FLAG 464 112 OUT_LOG_AMP
FLAG -256 -128 VN
FLAG -432 176 0
FLAG 336 -784 0
FLAG 336 -1376 VCC
FLAG -64 784 0
FLAG -64 688 VCC
FLAG -208 800 0
FLAG 464 736 OUT_REF_AMP
FLAG -496 800 0
FLAG 1152 496 0
FLAG 1152 592 VCC
FLAG 976 528 0
FLAG 1808 512 0
FLAG 1808 608 VCC
FLAG 1408 816 0
FLAG 1328 256 0
FLAG 1376 256 0
FLAG -752 176 0
FLAG -1504 176 0
SYMBOL schottky 160 96 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -448 -944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL res -336 -48 R0
SYMATTR InstName R1
SYMATTR Value 100Meg
SYMBOL current -432 -16 M0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Iin
SYMATTR Value {IBIAS}
SYMBOL pnp 32 -144 R270
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL Opamps\\LTC6244 -64 112 R0
SYMATTR InstName U1
SYMBOL pnp 272 -960 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res 320 -1296 R0
SYMATTR InstName R3
SYMATTR Value 15k
SYMBOL res -320 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 24Meg
SYMBOL pnp 32 480 R270
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL Opamps\\LTC6244 -64 736 R0
SYMATTR InstName U2
SYMBOL voltage -496 624 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -0.232
SYMBOL Opamps\\LTC6244 1152 544 M180
SYMATTR InstName U3
SYMBOL res 896 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 992 496 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 912 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 1232 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL Opamps\\LTC6244 1808 560 M180
SYMATTR InstName U4
SYMBOL res 1632 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {Rrtd}
SYMBOL res 1888 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4.99k
SYMBOL e 1376 96 R0
SYMATTR InstName E1
SYMATTR Value 5
SYMBOL current -752 -16 M0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName Iin1
SYMATTR Value PULSE(100p 300u 10u 200n 200n 50u)
SYMBOL current -1504 -16 M0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName Iin2
SYMATTR Value PULSE(1u 300u 1m 200n 200n 50u)
SYMBOL cap 1888 864 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 47pF
SYMBOL cap 1232 832 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 47pF
SYMBOL res 256 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 50Meg
TEXT -32 -680 Left 2 !.lib MCP6471.lib
TEXT -32 -640 Left 2 !.lib MMDL914T1.LIB
TEXT -800 -688 Left 2 !;dc dec Iin 10n 10m 1000
TEXT -32 -584 Left 2 !.step temp list -55 25 85
TEXT -800 -656 Left 2 ;.step param IBIAS list 1n 10n 100n 1u 10u 100u
TEXT -800 -608 Left 2 !;ac dec 1k 1 10Meg
TEXT -800 -552 Left 2 !.param IBIAS 0
TEXT -800 -488 Left 2 !.param tc1 = 4700u\n.param R0 = 1k\n.param Rrtd = R0*(1+(tc1*(Temp - 25)))
TEXT -1456 -648 Left 2 !.tran 0 5m 0
