Version 4.1
SHEET 1 2692 1988
WIRE -2288 -208 -2336 -208
WIRE -1744 -208 -2288 -208
WIRE -960 -208 -1744 -208
WIRE -912 -208 -960 -208
WIRE -784 -208 -832 -208
WIRE -720 -208 -784 -208
WIRE -432 -208 -720 -208
WIRE 272 -208 -432 -208
WIRE 752 -208 272 -208
WIRE -720 -192 -720 -208
WIRE -368 -96 -640 -96
WIRE 272 -96 272 -208
WIRE -960 -80 -960 -208
WIRE -784 -80 -784 -208
WIRE 752 -32 752 -208
WIRE -640 16 -640 -96
WIRE -560 16 -640 16
WIRE -368 16 -496 16
WIRE -224 16 -224 -96
WIRE -224 16 -288 16
WIRE -720 32 -720 -112
WIRE -1744 64 -1744 -208
WIRE -432 128 -432 -208
WIRE -784 144 -784 0
WIRE -720 144 -720 96
WIRE -720 144 -784 144
WIRE -640 144 -640 16
WIRE -640 144 -720 144
WIRE -464 144 -640 144
WIRE 752 144 752 48
WIRE -224 160 -224 16
WIRE -224 160 -400 160
WIRE -144 160 -144 16
WIRE -144 160 -224 160
WIRE -96 160 -144 160
WIRE 32 160 32 16
WIRE 32 160 -16 160
WIRE 112 160 32 160
WIRE 272 160 272 -16
WIRE 272 160 192 160
WIRE 352 160 272 160
WIRE 704 160 352 160
WIRE -960 176 -960 0
WIRE -864 176 -960 176
WIRE -464 176 -864 176
WIRE -2336 224 -2336 -208
WIRE -784 224 -784 144
WIRE -960 256 -960 176
WIRE 752 272 752 240
WIRE 960 272 752 272
WIRE 752 320 752 272
WIRE 752 432 752 400
WIRE -1744 448 -1744 144
WIRE -1648 448 -1744 448
WIRE -960 448 -960 336
WIRE -960 448 -1648 448
WIRE -784 448 -784 304
WIRE -784 448 -960 448
WIRE -432 448 -432 192
WIRE -432 448 -784 448
WIRE 704 448 -432 448
WIRE -1744 464 -1744 448
WIRE -1744 576 -1744 544
WIRE 640 608 528 608
WIRE 752 608 752 528
WIRE 752 608 640 608
WIRE 832 608 752 608
WIRE 992 608 912 608
WIRE -912 672 -1344 672
WIRE 528 688 528 608
WIRE 640 688 640 608
WIRE -864 736 -864 176
WIRE -912 752 -912 672
WIRE -2336 768 -2336 304
WIRE -1344 800 -1344 672
WIRE 528 800 528 768
WIRE 640 800 640 768
WIRE 992 800 992 608
WIRE 528 944 528 880
WIRE 640 944 640 880
WIRE -1344 992 -1344 880
WIRE -912 992 -912 800
WIRE -864 992 -864 816
WIRE 528 1056 528 1008
WIRE 640 1056 640 1008
WIRE 992 1056 992 880
FLAG 352 160 GATE_DRIVE
FLAG -2336 768 0
FLAG -2288 -208 VBUS
FLAG 640 1056 0
FLAG 960 272 OUT
FLAG -1648 448 VBUS-10V
FLAG 528 1056 0
FLAG 32 16 1
FLAG -144 16 2
FLAG -1344 992 0
FLAG 992 1056 0
FLAG -1744 576 0
FLAG -864 992 0
FLAG -912 992 0
DATAFLAG 832 272 ""
DATAFLAG 64 160 ""
DATAFLAG -1712 -208 ""
DATAFLAG -1712 -208 ""
SYMBOL res 208 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 75
SYMBOL res -928 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RSNS
SYMATTR Value 100m
SYMBOL voltage -2336 208 M0
SYMATTR InstName VBUS
SYMATTR Value {Vbus}
SYMBOL cap 624 944 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res 816 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName ROUT
SYMATTR Value 10µ
SYMBOL res 256 -112 R0
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL pmos 704 240 M180
SYMATTR InstName M3
SYMATTR Value SQJ469EP
SYMBOL res -800 -96 R0
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL res -976 -96 R0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL cap -496 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 330p
SYMBOL res -976 240 R0
SYMATTR InstName R7
SYMATTR Value 2k
SYMBOL ind 624 784 R0
SYMATTR InstName L1
SYMATTR Value 50n
SYMBOL res 624 672 R0
SYMATTR InstName R5
SYMATTR Value 3
SYMBOL cap 544 944 M0
SYMATTR InstName C5
SYMATTR Value 22µ
SYMBOL ind 544 784 M0
SYMATTR InstName L2
SYMATTR Value 50n
SYMBOL res 544 672 M0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL OpAmps\\UniversalOpAmp5 -432 160 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=400Meg Phimargin=60 SlewPos=400Meg SlewNeg=400Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=50m Ilimit=30m
SYMBOL voltage 0 160 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 60 56 VTop 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMBOL res -272 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 3k
SYMBOL pmos 704 528 M180
SYMATTR InstName M1
SYMATTR Value SQJ469EP
SYMBOL cap -304 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 120p
SYMBOL res -800 208 R0
SYMATTR InstName R1
SYMATTR Value 2k
SYMBOL voltage -1344 784 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VSET}
SYMBOL res 736 304 R0
SYMATTR InstName R15
SYMATTR Value 10m
SYMBOL res 736 -48 R0
SYMATTR InstName R16
SYMATTR Value 10m
SYMBOL cap -736 32 R0
SYMATTR InstName C4
SYMATTR Value 1000p
SYMBOL res -736 -208 R0
SYMATTR InstName R18
SYMATTR Value 5k
SYMBOL voltage -1744 48 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL res -1760 448 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL g -864 720 R0
SYMATTR InstName G1
SYMATTR Value {-1.0/10k}
SYMBOL res 976 784 R0
SYMATTR InstName RLOAD
SYMATTR Value 100m
TEXT -2568 480 Right 2 !.param RSNS=20m\n.param RSEL = 18\n.param RGAIN = 200\n.param RIN_INTEG = 10k
TEXT -2576 -56 Right 2 !.model SW SW(Ron=10u, Roff=10G, Vt=0.5, Vh=-0.4)
TEXT -2576 24 Right 2 ;.tran 0 10 0
TEXT -2568 432 Right 2 !.ac dec 1k 100 10Meg
TEXT -2568 624 Right 2 !.param Gfs = 4\n.param Cgs = 6000p\n.param Cgd = 10p
TEXT -2576 208 Right 2 !.opt noopiter
TEXT -2576 184 Right 2 !.opt abstol=1E-4 reltol=1E-4
TEXT -2608 1136 Right 2 ;.step param Lcable list 20u 50u 150u 300u 1m
TEXT -2600 984 Right 2 ;.step temp list -55 25 155
TEXT -2608 1048 Right 2 !.param Cload=10u\n.param Lcable = 1p
TEXT -2600 944 Right 2 !.param Vbus 30
TEXT -2608 1168 Right 2 ;.step param Cload 50u 220u 1m
TEXT -1368 1056 Left 2 !.step param VSET list 1 2.5 5 10
TEXT -3008 1248 Left 2 ;.option noopiter\n.option abstol=10e-4 reltol=10e-4
