Version 4.1
SHEET 1 2692 2380
WIRE -2320 -160 -2368 -160
WIRE -2144 -160 -2320 -160
WIRE -1968 -160 -2144 -160
WIRE -1888 -160 -1968 -160
WIRE -1792 -160 -1888 -160
WIRE -1664 -160 -1792 -160
WIRE -1504 -160 -1664 -160
WIRE -1456 -160 -1504 -160
WIRE -1328 -160 -1376 -160
WIRE -976 -160 -1328 -160
WIRE -496 -160 -976 -160
WIRE -240 -160 -496 -160
WIRE -896 -48 -1184 -48
WIRE -768 -48 -832 -48
WIRE -496 -48 -496 -160
WIRE -1328 -32 -1328 -160
WIRE -1504 -16 -1504 -160
WIRE -1664 0 -1664 -160
WIRE -1184 64 -1184 -48
WIRE -1136 64 -1184 64
WIRE -896 64 -1056 64
WIRE -768 64 -832 64
WIRE -2144 128 -2144 -160
WIRE -976 176 -976 -160
WIRE -1664 192 -1664 80
WIRE -1328 192 -1328 48
WIRE -1184 192 -1184 64
WIRE -1184 192 -1328 192
WIRE -992 192 -1184 192
WIRE -1968 208 -1968 -160
WIRE -1888 208 -1888 -160
WIRE -1792 208 -1792 -160
WIRE -768 208 -768 64
WIRE -768 208 -928 208
WIRE -736 208 -768 208
WIRE -640 208 -656 208
WIRE -592 208 -640 208
WIRE -496 208 -496 32
WIRE -496 208 -512 208
WIRE -1504 224 -1504 64
WIRE -1024 224 -1504 224
WIRE -992 224 -1024 224
WIRE -1328 256 -1328 192
WIRE -1232 256 -1328 256
WIRE -2368 272 -2368 -160
WIRE -240 272 -240 -160
WIRE -640 288 -640 208
WIRE -576 288 -640 288
WIRE -496 288 -496 208
WIRE -496 288 -512 288
WIRE -416 288 -496 288
WIRE -288 288 -416 288
WIRE -1504 320 -1504 224
WIRE -1328 320 -1328 256
WIRE -1232 320 -1232 256
WIRE -2144 464 -2144 208
WIRE -2048 464 -2144 464
WIRE -1968 464 -1968 272
WIRE -1968 464 -2048 464
WIRE -1888 464 -1888 272
WIRE -1888 464 -1968 464
WIRE -1792 464 -1792 272
WIRE -1792 464 -1888 464
WIRE -1504 464 -1504 400
WIRE -1504 464 -1792 464
WIRE -1328 464 -1328 400
WIRE -1328 464 -1504 464
WIRE -1232 464 -1232 400
WIRE -1232 464 -1328 464
WIRE -976 464 -976 240
WIRE -976 464 -1232 464
WIRE -240 592 -240 368
WIRE -32 592 -240 592
WIRE -352 656 -464 656
WIRE -240 656 -240 592
WIRE -240 656 -352 656
WIRE -144 656 -240 656
WIRE 16 656 -64 656
WIRE 192 656 16 656
WIRE -464 720 -464 656
WIRE -352 720 -352 656
WIRE 16 736 16 656
WIRE -464 832 -464 800
WIRE -352 832 -352 800
WIRE -1024 848 -1024 224
WIRE -1136 864 -1136 832
WIRE -1168 880 -1200 880
WIRE -1088 896 -1104 896
WIRE -1344 912 -1376 912
WIRE -1248 912 -1264 912
WIRE -1168 912 -1248 912
WIRE -2144 944 -2144 464
WIRE 16 944 16 816
WIRE 192 944 192 656
WIRE -1376 960 -1376 912
WIRE -1248 960 -1248 912
WIRE -1200 976 -1200 880
WIRE -1024 976 -1024 944
WIRE -1024 976 -1200 976
WIRE -464 992 -464 912
WIRE -352 992 -352 912
WIRE -1024 1008 -1024 976
WIRE -2368 1104 -2368 352
WIRE -2144 1104 -2144 1024
WIRE -2144 1104 -2368 1104
WIRE -1376 1104 -1376 1040
WIRE -1376 1104 -2144 1104
WIRE -1248 1104 -1248 1040
WIRE -1248 1104 -1376 1104
WIRE -1136 1104 -1136 928
WIRE -1136 1104 -1248 1104
WIRE -1088 1104 -1136 1104
WIRE -1024 1104 -1024 1088
WIRE -1024 1104 -1088 1104
WIRE -464 1104 -464 1056
WIRE -464 1104 -1024 1104
WIRE -352 1104 -352 1056
WIRE -352 1104 -464 1104
WIRE 16 1104 16 1008
WIRE 16 1104 -352 1104
WIRE 192 1104 192 1024
WIRE 192 1104 16 1104
WIRE -1088 1248 -1088 1104
FLAG -416 288 GATE_DRIVE
FLAG -1088 1248 0
FLAG -2320 -160 VBUS
FLAG -32 592 OUT
FLAG -2048 464 VBUS-10V
FLAG -1136 832 VBUS
DATAFLAG -160 592 ""
DATAFLAG -496 128 ""
SYMBOL res -496 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20
SYMBOL res -1472 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RSNS
SYMATTR Value 100m
SYMBOL voltage -2368 256 M0
SYMATTR InstName VBUS
SYMATTR Value {Vbus}
SYMBOL cap -368 992 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res -512 -64 R0
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL pmos -288 368 M180
SYMATTR InstName M3
SYMATTR Value SQJ469EP
SYMBOL res -1344 -48 R0
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL cap -832 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 33p
SYMBOL res -2160 928 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL ind -368 816 R0
SYMATTR InstName L1
SYMATTR Value 50n
SYMBOL res -368 704 R0
SYMATTR InstName R5
SYMATTR Value 3
SYMBOL cap -448 992 M0
SYMATTR InstName C5
SYMATTR Value 22µ
SYMBOL ind -448 816 M0
SYMATTR InstName L2
SYMATTR Value 50n
SYMBOL res -448 704 M0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL cap -1904 208 R0
SYMATTR InstName C8
SYMATTR Value 0.01µ
SYMBOL cap -1984 208 R0
SYMATTR InstName C9
SYMATTR Value 22µ
SYMBOL cap -1808 208 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMBOL res -1040 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4.99k
SYMBOL res -1488 -32 M0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL npn -1088 848 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL OpAmps\\UniversalOpAmp5 -1136 896 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=1Meg GBW=180Meg Phimargin=60 SlewPos=225Meg SlewNeg=225Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=50m Ilimit=30m
SYMBOL res -1040 992 R0
SYMATTR InstName R12
SYMATTR Value 4.99k
SYMBOL voltage -1376 944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 12 1 50n 50n 5u)
SYMBOL cap -832 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10p
SYMBOL res -1248 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1232 1056 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -1344 304 R0
SYMATTR InstName R13
SYMATTR Value 2k
SYMBOL res -1520 304 R0
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL voltage -2144 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL OpAmps\\ADA4807 -960 208 R0
SYMATTR InstName U1
SYMBOL diode -512 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res -640 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 5
SYMBOL res -1680 -16 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -1248 304 R0
SYMATTR InstName R15
SYMATTR Value 1Meg
SYMBOL res -160 672 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName ROUT
SYMATTR Value 10µ
SYMBOL res 176 928 R0
SYMATTR InstName RLOAD
SYMATTR Value 100m
SYMBOL ind 0 720 R0
SYMATTR InstName L3
SYMATTR Value {Lcable}
SYMBOL cap 0 944 R0
SYMATTR InstName C3
SYMATTR Value {Cload}
TEXT -2568 480 Right 2 !.param RSNS=20m\n.param RSEL = 18\n.param RGAIN = 200\n.param RIN_INTEG = 10k
TEXT -2576 -56 Right 2 !.model SW SW(Ron=10u, Roff=10G, Vt=0.5, Vh=-0.4)
TEXT -2576 24 Right 2 !.tran 0 10 0
TEXT -2568 432 Right 2 ;.ac dec 1k 100 10Meg
TEXT -2568 624 Right 2 !.param Gfs = 4\n.param Cgs = 6000p\n.param Cgd = 10p
TEXT -2576 208 Right 2 !.opt noopiter
TEXT -2576 184 Right 2 !.opt abstol=1E-4 reltol=1E-4
TEXT -2600 984 Right 2 ;.step temp list -55 25 155
TEXT -2608 1048 Right 2 ;.param Cload=10u\n.param Lcable = 1p
TEXT -2600 944 Right 2 !.param Vbus 32
TEXT 200 1144 Right 2 !.step param Cload list 1u 50u 220u 1m\n.step param Lcable list 100n 1u 10u 250u 1m
