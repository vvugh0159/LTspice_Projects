Version 4
SHEET 1 2136 1252
WIRE -1600 -32 -1712 -32
WIRE -1408 -32 -1600 -32
WIRE -1024 -32 -1408 -32
WIRE -624 -32 -1024 -32
WIRE -32 -32 -624 -32
WIRE 432 -32 -32 -32
WIRE 448 -32 432 -32
WIRE 544 -32 528 -32
WIRE 1056 -32 544 -32
WIRE -192 32 -800 32
WIRE 432 64 432 48
WIRE -1712 80 -1712 -32
WIRE -1408 96 -1408 -32
WIRE -800 96 -800 32
WIRE -272 96 -400 96
WIRE -1024 112 -1024 -32
WIRE -624 112 -624 -32
WIRE -1056 128 -1072 128
WIRE -656 128 -672 128
WIRE -864 144 -992 144
WIRE -464 144 -592 144
WIRE -1088 160 -1136 160
WIRE -1056 160 -1088 160
WIRE -656 160 -720 160
WIRE -1136 192 -1136 160
WIRE -272 192 -272 96
WIRE 432 192 432 144
WIRE 432 192 -272 192
WIRE -1072 208 -1072 128
WIRE -800 208 -800 192
WIRE -800 208 -1072 208
WIRE -672 208 -672 128
WIRE -400 208 -400 192
WIRE -400 208 -672 208
WIRE -800 224 -800 208
WIRE -400 224 -400 208
WIRE -1712 272 -1712 160
WIRE -192 272 -192 32
WIRE 544 272 544 48
WIRE 544 272 -192 272
WIRE 784 336 704 336
WIRE -1408 352 -1408 176
WIRE -1184 352 -1408 352
WIRE -1136 352 -1136 272
WIRE -1136 352 -1184 352
WIRE -1024 352 -1024 176
WIRE -1024 352 -1136 352
WIRE -800 352 -800 304
WIRE -800 352 -1024 352
WIRE -624 352 -624 176
WIRE -624 352 -800 352
WIRE -400 352 -400 304
WIRE -400 352 -624 352
WIRE -192 352 -192 272
WIRE 0 352 -192 352
WIRE 704 384 704 336
WIRE 432 400 432 192
WIRE 656 400 432 400
WIRE -1088 416 -1088 160
WIRE -720 416 -720 160
WIRE -720 416 -1088 416
WIRE -192 448 -192 352
WIRE -144 448 -192 448
WIRE 16 448 -64 448
WIRE 128 448 128 352
WIRE 128 448 80 448
WIRE 544 448 544 272
WIRE 656 448 544 448
WIRE -1408 464 -1408 352
WIRE -32 496 -32 -32
WIRE 704 496 704 464
WIRE -192 512 -192 448
WIRE -64 512 -192 512
WIRE 1056 512 1056 -32
WIRE 128 528 128 448
WIRE 128 528 0 528
WIRE 848 528 128 528
WIRE 1008 528 928 528
WIRE -272 544 -272 192
WIRE -64 544 -272 544
WIRE -1408 640 -1408 544
WIRE -400 640 -400 352
WIRE -32 640 -32 560
WIRE -32 640 -400 640
WIRE 1056 784 1056 608
WIRE -1184 800 -1184 352
WIRE 1008 800 -1184 800
WIRE 1056 944 1056 880
WIRE 1104 944 1056 944
WIRE 1312 944 1184 944
WIRE 1408 944 1312 944
WIRE 1616 944 1408 944
WIRE 1056 960 1056 944
WIRE 1056 960 912 960
WIRE 1616 960 1616 944
WIRE 1312 976 1312 944
WIRE 912 992 912 960
WIRE 1056 992 1056 960
WIRE 1408 1040 1408 944
WIRE 1616 1056 1616 1040
WIRE 1808 1072 1664 1072
WIRE 912 1088 912 1072
WIRE 1056 1088 1056 1072
WIRE 1808 1088 1808 1072
WIRE 1312 1104 1312 1056
WIRE 1696 1120 1664 1120
WIRE 912 1184 912 1152
WIRE 1056 1184 1056 1152
WIRE 1312 1184 1312 1168
WIRE 1408 1184 1408 1120
WIRE 1616 1184 1616 1136
WIRE 1696 1184 1696 1120
WIRE 1808 1184 1808 1168
FLAG -1408 640 0
FLAG -1712 272 0
FLAG -1600 -32 VBUS
FLAG 704 496 0
FLAG 784 336 OUT_CS_SNS
FLAG 1408 1184 0
FLAG 1616 1184 0
FLAG 1808 1184 0
FLAG 1696 1184 0
FLAG 1312 1184 0
FLAG 1056 1184 0
FLAG 912 1184 0
SYMBOL res 448 -48 M0
SYMATTR InstName R1
SYMATTR Value {mc(1k, {TOL_R_PREC})}
SYMBOL res 528 -48 R0
SYMATTR InstName R3
SYMATTR Value {mc(1k, {TOL_R_PREC})}
SYMBOL voltage -1408 80 M0
SYMATTR InstName VBIAS
SYMATTR Value {mc(10, tol_REF)}
SYMBOL res 432 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RS
SYMATTR Value 10m
SYMBOL res -1424 448 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage -1712 64 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VBUS
SYMATTR Value 30
SYMBOL voltage -1136 176 M0
SYMATTR InstName VREF
SYMATTR Value {mc(2.5, tol_REF)}
SYMBOL npn -864 96 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res -784 208 M0
SYMATTR InstName R7
SYMATTR Value {mc(1k, {TOL_R_PREC})}
SYMBOL npn -464 96 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res -384 208 M0
SYMATTR InstName R8
SYMATTR Value {mc(1k, {TOL_R_PREC})}
SYMBOL e 704 368 R0
SYMATTR InstName E1
SYMATTR Value 1.0
SYMBOL res 448 48 M0
SYMATTR InstName R2
SYMATTR Value {mc(50, {TOL_R_PREC})}
SYMBOL OpAmps\\UniversalOpAmp5 -32 528 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=1Meg GBW=330Meg Phimargin=60 SlewPos=500Meg SlewNeg=500Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=50m Ilimit=50m
SYMBOL cap 80 432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 47p
SYMBOL res -48 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 75k
SYMBOL pmos 1008 608 M180
SYMATTR InstName M1
SYMATTR Value Si7469DP
SYMBOL res 1392 1024 R0
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL sw 1616 1152 R180
SYMATTR InstName S1
SYMBOL res 1632 944 M0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL res 944 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RG
SYMATTR Value 250
SYMBOL voltage 1808 1072 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 5m 1u 1u 10)
SYMBOL res 1088 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName ROUT
SYMATTR Value 1µ
SYMBOL cap 1296 1104 R0
SYMATTR InstName C3
SYMATTR Value 1m
SYMBOL ind 1296 960 R0
SYMATTR InstName L1
SYMATTR Value 500n
SYMBOL pmos 1008 880 M180
SYMATTR InstName M2
SYMATTR Value Si7469DP
SYMBOL res 928 976 M0
SYMATTR InstName R10
SYMATTR Value 3
SYMBOL res 1072 976 M0
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL cap 928 1088 M0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL cap 1040 1088 R0
SYMATTR InstName C4
SYMATTR Value 22µ
SYMBOL cap 64 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.47p
SYMBOL OpAmps\\UniversalOpAmp5 -624 144 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=400Meg Phimargin=60 SlewPos=700Meg SlewNeg=700Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=100m Ilimit=1
SYMBOL OpAmps\\UniversalOpAmp5 -1024 144 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=1Meg GBW=400Meg Phimargin=60 SlewPos=700Meg SlewNeg=700Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=100m Ilimit=1
TEXT -1792 464 Left 2 !.param TOL_REF = 0.01\n.param TOL_R_PREC = 0.0005
TEXT -1800 384 Left 2 !.step param x 0 50 1
TEXT -1792 536 Left 2 !.tran 0 10m 0
TEXT -1976 600 Left 2 !.model SW SW(Ron=100m, Roff=10G, Vt=0.5)
