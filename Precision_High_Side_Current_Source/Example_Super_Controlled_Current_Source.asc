Version 4
SHEET 1 2692 2380
WIRE -2096 -208 -2144 -208
WIRE -1536 -208 -2096 -208
WIRE -1104 -208 -1536 -208
WIRE -960 -208 -1104 -208
WIRE -912 -208 -960 -208
WIRE -784 -208 -832 -208
WIRE -432 -208 -784 -208
WIRE 272 -208 -432 -208
WIRE 432 -208 272 -208
WIRE 512 -208 432 -208
WIRE 608 -208 512 -208
WIRE 752 -208 608 -208
WIRE -1104 -128 -1104 -208
WIRE -352 -96 -640 -96
WIRE -224 -96 -288 -96
WIRE 272 -96 272 -208
WIRE -784 -80 -784 -208
WIRE -960 -64 -960 -208
WIRE 1120 -16 1056 -16
WIRE -1104 16 -1104 -48
WIRE -640 16 -640 -96
WIRE -560 16 -640 16
WIRE -352 16 -480 16
WIRE -224 16 -288 16
WIRE -704 32 -704 -96
WIRE 432 32 432 -208
WIRE 512 32 512 -208
WIRE 608 32 608 -208
WIRE 1456 32 1360 32
WIRE 1360 64 1360 32
WIRE 1056 80 1056 -16
WIRE 1312 80 1056 80
WIRE -1536 96 -1536 -208
WIRE 752 96 752 -208
WIRE 272 112 272 -16
WIRE 272 112 144 112
WIRE 352 112 272 112
WIRE 704 112 352 112
WIRE -1104 128 -1104 80
WIRE -432 128 -432 -208
WIRE 1312 128 1056 128
WIRE -784 144 -784 0
WIRE -704 144 -704 96
WIRE -704 144 -784 144
WIRE -640 144 -640 16
WIRE -640 144 -704 144
WIRE -464 144 -640 144
WIRE -224 160 -224 16
WIRE -224 160 -400 160
WIRE -112 160 -224 160
WIRE 32 160 -32 160
WIRE 48 160 32 160
WIRE 144 160 144 112
WIRE 144 160 128 160
WIRE -960 176 -960 16
WIRE -880 176 -960 176
WIRE -464 176 -880 176
WIRE 1360 176 1360 144
WIRE -2144 224 -2144 -208
WIRE 752 256 752 192
WIRE 1056 256 752 256
WIRE 1120 256 1056 256
WIRE -960 272 -960 176
WIRE -784 272 -784 144
WIRE 32 288 32 160
WIRE 64 288 32 288
WIRE 144 288 144 160
WIRE 144 288 128 288
WIRE 1456 304 1360 304
WIRE 1360 336 1360 304
WIRE 1056 352 1056 256
WIRE 1312 352 1056 352
WIRE 1312 400 1056 400
WIRE 1360 448 1360 416
WIRE -1536 480 -1536 176
WIRE -1216 480 -1536 480
WIRE -960 480 -960 352
WIRE -960 480 -1216 480
WIRE -784 480 -784 352
WIRE -784 480 -960 480
WIRE -432 480 -432 192
WIRE -432 480 -784 480
WIRE 432 480 432 96
WIRE 432 480 -432 480
WIRE 512 480 512 96
WIRE 512 480 432 480
WIRE 608 480 608 96
WIRE 608 480 512 480
WIRE -1536 496 -1536 480
WIRE 368 608 64 608
WIRE 752 608 752 256
WIRE 752 608 368 608
WIRE 848 608 752 608
WIRE 1152 608 928 608
WIRE 1328 608 1152 608
WIRE 1536 608 1328 608
WIRE -1536 640 -1536 576
WIRE 368 672 368 608
WIRE -2144 768 -2144 304
WIRE 256 784 256 752
WIRE 368 784 368 752
WIRE 1152 784 1152 608
WIRE 1328 784 1328 608
WIRE -880 800 -880 176
WIRE 64 800 64 608
WIRE -1056 816 -1056 752
WIRE -1088 832 -1120 832
WIRE -944 848 -1024 848
WIRE -1328 864 -1392 864
WIRE -1200 864 -1248 864
WIRE -1088 864 -1200 864
WIRE -1200 912 -1200 864
WIRE 1152 912 1152 848
WIRE -1120 928 -1120 832
WIRE -880 928 -880 896
WIRE -880 928 -1120 928
WIRE 256 944 256 864
WIRE 368 944 368 864
WIRE -880 960 -880 928
WIRE -1392 1056 -1392 944
WIRE -1200 1056 -1200 992
WIRE -1056 1056 -1056 880
WIRE -880 1056 -880 1040
WIRE 1152 1056 1152 992
WIRE 1328 1056 1328 864
WIRE 64 1088 64 880
WIRE 256 1088 256 1008
WIRE 368 1088 368 1008
FLAG 352 112 GATE_DRIVE
FLAG -2144 768 0
FLAG -2096 -208 VBUS
FLAG 1536 608 OUT
FLAG -1216 480 VBUS-10V
FLAG -1056 752 VBUS
FLAG 1328 1056 0
FLAG -1392 1056 0
FLAG -880 1056 0
FLAG -1200 1056 0
FLAG -1056 1056 0
FLAG 1152 1056 0
FLAG 256 1088 0
FLAG 64 1088 0
FLAG 368 1088 0
FLAG 1120 256 CASCODE_SOURCE
FLAG 1360 448 0
FLAG 1056 400 VBUS-10V
FLAG 1456 304 VSG_CASCODE
FLAG 1120 -16 CASCODE_SOURCE
FLAG 1360 176 0
FLAG 1056 128 OUT
FLAG 1456 32 VSD_CASCODE
FLAG -1536 640 0
DATAFLAG 1408 608 ""
DATAFLAG 208 112 ""
SYMBOL res 144 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20
SYMBOL res -928 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName RSNS
SYMATTR Value 100m
SYMBOL voltage -2144 208 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VBUS
SYMATTR Value 32
SYMBOL cap 352 944 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res 832 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName ROUT
SYMATTR Value 10µ
SYMBOL res 256 -112 R0
SYMATTR InstName R20
SYMATTR Value 50k
SYMBOL res -800 -96 R0
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL cap -288 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 120p
SYMBOL ind 352 768 R0
SYMATTR InstName L1
SYMATTR Value 50n
SYMBOL res 352 656 R0
SYMATTR InstName R5
SYMATTR Value 3
SYMBOL cap 272 944 M0
SYMATTR InstName C5
SYMATTR Value 22µ
SYMBOL ind 272 768 M0
SYMATTR InstName L2
SYMATTR Value 50n
SYMBOL res 272 656 M0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL cap 496 32 R0
SYMATTR InstName C8
SYMATTR Value 0.01µ
SYMBOL cap 416 32 R0
SYMATTR InstName C9
SYMATTR Value 22µ
SYMBOL cap 592 32 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMBOL res -944 -80 M0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL npn -944 800 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL OpAmps\\UniversalOpAmp5 -1056 848 R0
SYMATTR InstName U3
SYMATTR Value2 Avol=1Meg GBW=180Meg Phimargin=60 SlewPos=225Meg SlewNeg=225Meg
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=50m Ilimit=30m
SYMBOL res -896 944 R0
SYMATTR InstName R12
SYMATTR Value 4.99k
SYMBOL voltage -1392 848 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VCTL
SYMATTR Value PULSE(0 {VSET} 1 50n 50n 100u)
SYMBOL cap -288 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 20p
SYMBOL res 1312 768 R0
SYMATTR InstName RLOAD
SYMATTR Value 200m
SYMBOL res -1232 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1184 1008 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -800 256 R0
SYMATTR InstName R13
SYMATTR Value 2k
SYMBOL res -976 256 R0
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL OpAmps\\UniversalOpAmp5 -432 160 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=900Meg Phimargin=60 SlewPos=1.5G SlewNeg=1.5G
SYMATTR SpiceLine2 Vos=0 Ibp=2n Ibn=1n Iq=1m Rail=2 Ilimit=80m
SYMBOL cap -720 32 R0
SYMATTR InstName C3
SYMATTR Value 1000p
SYMBOL res -720 -192 R0
SYMATTR InstName R15
SYMATTR Value 5k
SYMBOL cap -1088 16 M0
SYMATTR InstName C4
SYMATTR Value 1000p
SYMBOL res -1088 -144 M0
SYMATTR InstName R16
SYMATTR Value 50
SYMBOL diode 128 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 1136 784 R0
SYMATTR InstName C6
SYMATTR Value {Cload}
SYMBOL res -464 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res 48 784 R0
SYMATTR InstName R17
SYMATTR Value 1Meg
SYMBOL ind 1136 896 R0
SYMATTR InstName L6
SYMATTR Value {Lcable}
SYMBOL e 1360 320 R0
SYMATTR InstName E1
SYMATTR Value 1.0
SYMBOL e 1360 48 R0
SYMATTR InstName E2
SYMATTR Value 1.0
SYMBOL res -16 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 5
SYMBOL pmos 704 192 M180
SYMATTR InstName M1
SYMATTR Value IXTK170P10P
SYMATTR Prefix X
SYMBOL voltage -1536 80 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VBUS1
SYMATTR Value 10
SYMBOL res -1552 480 R0
SYMATTR InstName R1
SYMATTR Value 10
TEXT -2376 480 Right 2 !.param RSNS=20m\n.param RSEL = 18\n.param RGAIN = 200\n.param RIN_INTEG = 10k
TEXT -2376 -24 Right 2 !.model SW SW(Ron=10u, Roff=10G, Vt=0.5, Vh=-0.4)
TEXT -2384 24 Right 2 !.tran 0 10 0 startup
TEXT -2376 432 Right 2 ;.ac dec 1k 100 10Meg
TEXT -2384 208 Right 2 !.opt noopiter
TEXT -2384 184 Right 2 !.opt abstol=1E-4 reltol=1E-4
TEXT -2408 984 Right 2 ;.step temp list -55 25 155
TEXT -2416 1048 Right 2 ;.param Cload=10u\n.param Lcable = 200n
TEXT -2408 944 Right 2 !.param Vbus 32
TEXT -1400 1120 Left 2 !.step param VSET list 1 5 10
TEXT -1400 1160 Left 2 !.param Rcomp_Type3 50
TEXT -1392 1200 Left 2 ;.step param Rcomp_Type3 list 50 100Meg
TEXT 1144 1136 Right 2 ;.step param Cload list 1u 50u 220u 1m\n.step param Lcable list 100n 1u 10u 250u 1m
TEXT 712 -1040 Left 2 !*---------- IXTK170P10P Spice Model ----------\n.SUBCKT IXTK170P10P 10 20 30 \n*     TERMINALS:  D  G  S\nM1 1 2 3 3 PMOS L = 1E-006 W = 1E-006 \nRD 10 1 0.1739 \nRS 30 3 0.001 \nRG 20 2 12.5 \nCGS 2 3 {Cgs}\nEGD 12 30 2 1 1 \nVFB 14 30 0 \nFFB 2 1 VFB 1 \nCGD 13 14 {Cgd}\nR1 13 30 1 \nD1 13 12 DLIM \nDDG 14 15 DCGD \nR2 12 15 1 \nD2 30 15 DLIM \nDSD 10 3 DSUB \n.MODEL PMOS PMOS LEVEL = 3 U0 = 400 VMAX = 1E+006 ETA = 4.441E-010 \n+ TOX = 6E-008 NSUB = 1E+016 KP = {Kp} KAPPA = 61.41 VTO = {Vt}\n.MODEL DCGD D CJO = 9.262E-011 VJ = 0.7916 M = 0.3376 \n.MODEL DSUB D IS = 3.112E-009 N = 1.487 RS = 0.008305 BV = 150 \n+ CJO = 1.637E-010 VJ = 0.753 M = 0.6004 \n.MODEL DLIM D IS = 0.0001 \n.ENDS\n*Diodes DMP10H400SK3 Spice Model v1.0 Last Revised 2014/02/21
TEXT 416 -1040 Left 2 !.param Cgs = 13n\n.param Cgd = 2n\n.param Cds = 2n\n.param Kp=45.0\n.param Vt=-3.75
TEXT 1144 1200 Right 2 !.param Cload 1u\n.param Lcable 10n
